<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="img/style.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
	<p style="font-size:16px;">
		<table>
			<tr>
				<td>标注颜色图示：</td>
				<td><span style="font-size:40px;color:#FF0000;">•</span></td>
				<td width="120"><font color="#FF0000">红字表示严重抄袭</font></td>
				<td><span style="font-size:40px;color:#FF9900;">•</span></td>
				<td width="120"><font color="#FF9900">橙字表示中度抄袭</font></td>
				<td><span style="font-size:40px;color:#0000FF;">•</span></td>
				<td width="120"><font color="#0000FF">蓝字表示引用</font></td>
				<td><span style="font-size:40px;color:gray;">•</span></td>
				<td width="120"><font color="gray">灰色表示不参与检测</font></td>
				<td><span style="font-size:40px;">•</span></td>
				<td width="120">黑色表示原创</td>
			</tr>
		</table>
	</p>
	<div class="paper">
					<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p>本科毕业论文</p>
			<p>院 系	匡亚明学院</p>
			<p></p>
			<p>专 业	计算机科学与技术</p>
			<p></p>
			<p>题 目基于超声波和智能手机的室内定位系统</p>
			<p>年 级 2016 级 学 号 161240005</p>
			<p>学生姓名	陈勇虎</p>
			<p></p>
			<p>指导老师 谢磊 职 称 副教授</p>
			<p>提交日期	2020 年 5 月 20 日</p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p>南京大学本科生毕业论文 (设计、作品) 中文摘要</p>
			<p>题目：基于超声波和智能手机的室内定位系统院系：匡亚明学院专业：计算机科学与技术本科生姓名：陈勇虎指导老师（姓名、职称）：谢磊副教授摘要：</p>
			<p>随着全球定位系统推广使用，人们在定位的精度上追求着更高标准，尤其在室内定位问题的需求上也在提升。在日常生活中，室内丢失物品的寻找也是令人困扰的问题，因此室内定位有着很实际的应用需求。</p>
			<p>在无线传感网发展的趋势下，科研工作者对声波的研究也越来越深入。超声波因为其抗干扰等优点，使得以其为载体的定位系统也越来越多，而其定位精度也在不断提升。与此同时，软硬件技术的发展带来了智能设备的蓬勃发展，双麦手机的出现，传感器的富集，也为智能手机的应用带来了更多的可能。基于智能手机的双麦克风和传感器，辅助声波的应用，为其在定位技术的应用带来了契机。</p>
			<p><a href='result-59251931.html' target='resultFrame'><span class='s'>本文结合目前常见的智能手机，提出了一种利用声波和智能手机进行室内定位的方案。</span></a>首先对涉及的相关原理进行分析和阐述，构建了定位算法的数学模型，随后给出了完整的利用双麦手机及其集成的传感器进行定位的方案，并提出了离线计算和在线指引两种方式，最后在安卓系统上进行了实现。</p>
			<p>本文的主要工作如下:</p>
			<p>(1) 对到达时延差计算的原理进行阐述和分析，并对双麦智能手机及其集成的传感器进行介绍，并提出了针对于此的数据处理方式。</p>
			<p>(2) 提出了利用双麦克风的智能手机辅佐声波进行室内定位的离线计算方案和在线指引方案，详细说明了其数据处理细节，并通过降维指引的思路为数据的可视化铺垫了基础。</p>
			<p>(3) 系统设计并且实现了基于以上方案的定位系统，然后对系统的功能和精度进行总结和测试，在一组实际实验中，达到了离线定位分量误差为</p>
			<p>(1.6671cm,1.9620cm,1.6666cm), 在线指引角度误差为 1.<a href='result-59251973.html' target='resultFrame'><span class='s'>7877°，对后续工作进行了展望。</span></a></p>
			<p>关键词：声源定位, 智能手机, 双麦系统, 离线计算, 在线指引</p>
			<p>南京大学本科生毕业论文 (设计、作品) 英文摘要</p>
			<p>THESIS: IMU</p>
			<p>DEPARTMENT: School of Computer Science</p>
			<p>SPECIALIZATION: Computer Science and Technology</p>
			<p>UNDERGRADUATE: Yonghu Chen</p>
			<p>MENTOR: Professor Lei Xie</p>
			<p>ABSTRACT:</p>
			<p>With the popularization and use of the global positioning system, people are pursuing higher standards in positioning accuracy, especially in the demand for indoor positioning problems.In daily life, the search for lost items indoors is also a disturbing problem,so the indoor positioning problems has very practical application require?</p>
			<p>ments.</p>
			<p>Under the development trend of wireless sensor networks, scientific researchers are also deepening their research on sound waves.<a href='result-59252031.html' target='resultFrame'><span class='s'> Because of its anti?</span></a>interference and other advantages, ultrasound has made more and more positioning systems using it as a carrier, and its accuracy is also constantly improving.At the same time, the development of hardware and software technology has brought about the vigorous development of smart devices.<a href='result-59252043.html' target='resultFrame'><span class='s'> The emergence of dual?</span></a>mircophone smart phones and the enrichment of sensors have also brought more possibilities for the application of mobile phones.This article combines a common smartphone at present, and puts forward a solution for positioning indoors using sound waves and smartphones. Firstly, the related principles involved are analyzed and elaborated, and the mathematical model of the positioning algorithm is constructed. Then, a complete positioning scheme using the dual?mircophone mobile phone and its integrated sensors is given. Two methods of offline calculation and online guidance are proposed, and finally implemented on the</p>
			<p>Android system.</p>
			<p>The main contribution in this paper are as follows:</p>
			<p>1.We explain and analyze the principle of arrival delay difference calculation, introduce the sensors of dual?mircophon smartphones and its integrated sensors, and pro?</p>
			<p><a href='result-59252091.html' target='resultFrame'><span class='s'>pose a data processing method for the model.</span></a></p>
			<p>2.We present an offline calculation solution and an online guidance solution using a dual?microphone smartphone assisted by sound waves for indoor positioning, explain the details of its data processing are explained in detail, and propose the idea of dimen?</p>
			<p>sionality reduction guidance to lay the foundation for data visualization.</p>
			<p>3.We systematically design and implement of the positioning system based on the above scheme, summarize and test its function and accuracy. In a set of actual experiments, the offline positioning component error is (1.6671cm, 1.9620cm, 1.6666cm), the online guidance angle error is 1.7877 °, and finnally we prospect the follow?up work.</p>
			<p>KEY WORDS: Acoustic source localization, Smart phone, Dual?microphone, Offline calculation, Online guidance</p>
			<p></p>
			<p>目 录</p>
			<p>目 录 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · IV</p>
			<p>1 绪论 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	1</p>
			<p>1 . 1 研究背景及意义· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	1</p>
			<p>	1 . 2 国内外研究现状· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	1</p>
			<p>	1 . 3 论文主要工作 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	2</p>
			<p>	1 . 4 论文的整体结构· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	3</p>
			<p>2 智能手机感知与定位原理 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	4</p>
			<p>2 . 1 双麦克风的节点定位 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	4</p>
			<p>	2 . 2 智能手机的传感器 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	6</p>
			<p>2 . 2 . 1 陀螺仪 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	7</p>
			<p>	2 . 2 . 2 加速度传感器 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	7</p>
			<p>	2 . 2 . 3 磁力传感器 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	8</p>
			<p>	2 . 2 . 4 屏幕方向传感器 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	8</p>
			<p>	2 . 3 信号时延计算原理 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	8</p>
			<p>	2 . 4 基于到达时间差的定位算法设计 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	10</p>
			<p>	2 . 4 . 1 二维空间下的定位分析 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	10</p>
			<p>	2 . 4 . 2 三维空间下的定位分析 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	11</p>
			<p>	2 . 4 . 3 离线计算下的定位算法分析和设计 · · · · · · · · · · · · · · · · · · · · · · · · · ·	11</p>
			<p>	2 . 4 . 4 在线指引下的寻迹方式 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	14</p>
			<p>3 基于双麦系统智能手机的声源定位方案 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 16</p>
			<p>3 . 1 离线数据预处理流程 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	16</p>
			<p>	3 . 2 数据采集 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	17</p>
			<p>	3 . 3 声音数据处理 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	20</p>
			<p>3 . 3 . 1 滤波除噪 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	20</p>
			<p>	3 . 3 . 2 异常点移除 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	21</p>
			<p>	3 . 3 . 3 分窗加帧 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	22</p>
			<p></p>
			<p>	3 . 3 . 4 端点检测 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	23</p>
			<p>	3 . 3 . 5 到达时间差计算 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	23</p>
			<p>	3 . 3 . 6 到达时间差处理 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	24</p>
			<p>	3 . 4 离线处理下的定位方法 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	27</p>
			<p>	3 . 5 离线计算到在线指引的迁移· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	28</p>
			<p>	3 . 5 . 1 概念阐述 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	28</p>
			<p>	3 . 5 . 2 在线处理算法模型 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	29</p>
			<p>	3 . 5 . 3 状态判别 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	30</p>
			<p>	3 . 5 . 4 陀螺仪数据使用 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	31</p>
			<p>	3 . 5 . 5 加速计和磁力计的使用 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	31</p>
			<p>4 模型系统实现与实验分析 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 32</p>
			<p>4 . 1 开发环境与平台· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	32</p>
			<p>	4 . 2 系统设计 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	32</p>
			<p>4 . 2 . 1 多模块设计 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	33</p>
			<p>	4 . 2 . 2 界面与运行方式 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	34</p>
			<p>	4 . 3 系统功能实现 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	36</p>
			<p>	4 . 3 . 1 录音模块功能 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	36</p>
			<p>	4 . 3 . 2 数据处理模块功能 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	37</p>
			<p>	4 . 3 . 3 传感器监听模块功能 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	38</p>
			<p>	4 . 3 . 4 显示模块 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	39</p>
			<p>	4 . 4 系统性能测试和分析 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	39</p>
			<p>5 总结与展望 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 43</p>
			<p>5 . 1 工作总结 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	43</p>
			<p>	5 . 2 前景展望 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·	43</p>
			<p>参考文献 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 44</p>
			<p>致 谢 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 46</p>
			<p></p>
			<p></p>
			<p>	毕业论文	陈勇虎</p>
			<p></p>
			<p>I</p>
			<p>II</p>
			<p>III</p>
			<p>第一章 绪论</p>
			<p>1.1 研究背景及意义</p>
			<p><span class='q'>在室内环境 (办公室，住所) 中想要寻找一个小物品，诸如钥匙，硬币，可以说是一件令人费神的事情了[1]。</span>在游戏世界和虚幻的电影场景中，我们都或多或少接触过类似于“寻宝罗盘”的神奇宝物，它可以类似一个掌上的指南针，时刻指示“宝物”的方向。随着各式各样移动智能设备的广泛涌现，例如智能手机，智能手表，这些设备不仅自带了诸多传感器，同时可以为用户提供很好的 UI 界面。因此，如果可以利用这些设备实现类似于寻宝罗盘的功能，用于寻找我们室内环境中的小物品，无疑是有趣且富有创造性的。</p>
			<p>随着定位精度需求的提升，现在的研究者也室内外的定位技术研究也越来</p>
			<p>越深入。<span class='q'>传统的全球定位系统 (Global Positioning System,GPS)[2]</span> 无疑是现代定位系统的首选，然而，在室内环境中，由于卫星信号会受到建筑物的削弱，遮蔽等影响, 以及在室内环境下可能出现的，诸如信号反射，折射，透射等造成的非视距传输和多径效应, 导致室内定位误差较大，所以如果在室内环境下，依然采用卫星系统定位的话，显然是无法满足室内定位精度的需求。</p>
			<p>智能设备在软硬件方面的发展也带了传感器，双麦技术等的升级，基于双麦结点的定位系统也在不断发展中，而利用智能手机的双麦及其内置的传感器的定位系统还并不常见，因此通过对智能手机的双麦系统以及其内置的诸多传感器，研究其在定位方面的应用，这在室内定位研究上无疑有着深远的意义。</p>
			<p>1.2 国内外研究现状</p>
			<p>噪声和异响是一种日常生活和工业生产中所常见的现象，在很多情况下，这些声音是令人困扰的。<a href='result-59252453.html' target='resultFrame'><span class='s_l'>至于如何去解决这些噪声，我们首先需要去识别噪声并且能够定位出噪声的方向和位置，这就是声源定位问题的一个实例。</span></a>声源定位技术是在一个有噪声的环境中，去识别或者计算某一个声源的空间位置的技术。当然，声源定位技术并不只局限于在噪声方面的定位，在特定的场合中，声源定位也有着不同的表现。<a href='result-59252465.html' target='resultFrame'><span class='s_l'>例如在一个有很多参会者的会议室中，定位演讲者方位也是声源定位技术的一个应用。</span></a>日常生活中我们似乎很容易根据听到的声音来辨别声源的大致方向，比如从身边急驶而过的汽车的来向，甚至车辆距离自己大概的距离。经过专业的训练，我们甚至可以让盲人参与到踢足球的运动中。人类之所以可以做到“听声辨位”，主要是利用了声音到达双耳的时间差，声级差，相位差，音色差等。这种常见的“听声辨位”尽管有一定的局限性，但是依然可以满足我们生活中很多的定位需求。声音定位技术通过将麦克风类比人耳，通过处理其捕获的声音信号求解声源方位，借助于双耳效应的启发，目前的定位技术大多数都是依靠前面所述的四个参数，其中最常用的还是声音到达人耳的时间差。然而，在实际生活中，由于环境中的噪声，混响等环境不可控因素的影响，高精度的定位变得束手无策。而近些年，以声波为载体的定位系统研究也越来越深入，其应用也越来越广泛。例如在军事应用上，美军的狙击手探测技术，在战争中的作用无疑是巨大的。此外，现在也有很多的线上的远程视频会议，摄像头也会检测到演讲中的对象，并进而将摄像头聚焦于该人。鉴于声源定位的思想，结合室内较安静的环境，本文基于室内环境，研究利用声波进行定位的问题。</p>
			<p><a href='result-59252513.html' target='resultFrame'><span class='s'>在声源定位方面，基于到达时间 (TOA), 到达时间差 (TDOA) 的方法越来越多。</span></a>相比较而言，利用到达时间差的方法避开了到达时间中的同步问题，其精度也更高，所以主流的定位方案中都基于到达时间差。<a href='result-59252521.html' target='resultFrame'><span class='s_l'>本文也是在此思路上进行后续的研究。</span></a></p>
			<p>在现阶段的定位技术中，以超声波为载体的定位技术也非常成熟，超声波具有抗干扰性强的优点，在现阶段的定位技术中，其精度也到达了厘米级。<span class='q'>目前有很多的定位系统依赖于超声波做媒介，如谢地等[3]</span> 利用超声波提出了高精度的室内定位模型，其中以到达时间 (TOA) 的思想，通过同步信号进行距离的测量和定位?<span class='q'> 乔鑫等[4]</span><a href='result-59252543.html' target='resultFrame'><span class='s'> 利用超声波和对射式测距，最后通过三角定位提出了一种高精度的超声波定位?</span></a><span class='q'> 徐昆毓[5]</span><a href='result-59252547.html' target='resultFrame'><span class='s_l'> 通过固定超声波发射点，利用射频信号作为时间标记，实现了对移动结点的定位；</span></a><span class='q'>此外，赵予玮[6]</span><a href='result-59252551.html' target='resultFrame'><span class='s'> 的通过将射频识别技术</span></a></p>
			<p>(RFID) 和超声波结合的方式，提出了一种室内定位算法。</p>
			<p>目前到达时间差的的计算主要与时延估计，科研工作者也在努力改进其精度。</p>
			<p>1.3 论文主要工作</p>
			<p>论文的主要工作主要由以下几个方面:</p>
			<p>(1) 对到达时延差计算的原理进行阐述和分析，并对双麦智能手机及其集成的传感器进行介绍，并提出了针对于此的数据处理方式。</p>
			<p>(2) 提出了利用双麦克风的智能手机辅佐声波进行室内定位的离线计算方案和在线指引方案，详细说明了其数据处理细节，并通过降维指引的思路为数据的可视化铺垫了基础。</p>
			<p>(3) 系统设计并且实现了基于以上方案的定位系统，然后对系统的功能和精度进行总结和测试，在一组实际实验中，达到了离线定位分量误差为</p>
			<p>(1.6671cm,1.9620cm,1.6666cm), 在线指引角度误差为 1.<a href='result-59252601.html' target='resultFrame'><span class='s'>7877°，对后续工作进行了展望。</span></a></p>
			<p>1.4 论文的整体结构</p>
			<p>本文共分为五个章节，每个章节具体安排如下:</p>
			<p><a href='result-59252615.html' target='resultFrame'><span class='s'>第一章绪论介绍该选题的背景意义，简述了目前国内外基于声波的室内定位研究现状，以及该论文的主要工作和结构安排。</span></a></p>
			<p>第二章通过对智能手机和传感器进行介绍，描述了以双麦手机定位的基础，并介绍了以广义互相关求解信号时延的原理，以及通过到达时间差进行定位的方案，包括二维的定位和三维空间下的定位，并进而提出论文后续描述的离线计算和在线指引两种定位方案。</p>
			<p>第三章通过对双麦克风手机定位信号处理细节的描述，说明了数据处理流程，并结合定位方案进行分析和对传感器使用进行说明。</p>
			<p><a href='result-59252637.html' target='resultFrame'><span class='s'>第四章基于前文所描述的方案进行了系统实现和实验结果分析，对系统的设计和实现细节进行了详细的说明。</span></a></p>
			<p>第五章总结了本文的主要探究工作，并进而对后续的工作方向进行了</p>
			<p>展望。</p>
			<p></p>
			<p>	毕业论文	陈勇虎</p>
			<p>	毕业论文	陈勇虎</p>
			<p></p>
			<p>1</p>
			<p>2</p>
			<p>3</p>
			<p>第二章 智能手机感知与定位原理</p>
			<p>近些年来，以声波为载体的定位方案备受关注，这些定位方案依赖于多个麦克风，捕获多路信号，通过信号同步并进行后续的信号处理以实现定位方案。然而考虑到节点的布置的繁琐和设备的昂贵，在很多室内定位系统并不能很好的投入使用，考虑到其他成本和功耗问题，其定位算法也因此在很多场景中并不能很好的应用。因此本文提出了一种可以在室内较安静的环境下利用智能手机进行定位的方案。</p>
			<p>随着智能设备的普及以及诸多传感器的集成，智能设备的升级也一直与硬件技术处于协同发展之中。无论是在 ios 系统平台下，还是 Android 系统平台下的智能设备，其内置传感器也越来越丰富，也为智能设备应用的发展带来了更多的可能。</p>
			<p>本章将会对利用智能手机进行双麦节点定位进行简要描述，并对本文中后续所涉及的智能手机内置传感器进行讲解，最后系统描述本文中所使用的的一些定位原理和算法设计。</p>
			<p>2.1 双麦克风的节点定位</p>
			<p><a href='result-59252721.html' target='resultFrame'><span class='s_l'>随着可移动智能设备的普及，尤其是智能手机更是走到了每个人的生活中。</span></a>自 2018 年起，大部分的智能手机都开始集成两个甚至多个麦克风，除了底部的通话话筒以外，智能手机的顶部都还有一个“小孔”(不同的手机可能有所区别，例如 iPhone 手机的次麦克风可能位于主摄像头的附近)(如图 2 1)，这就是手机的降噪麦克风，它的主要作用是实现有噪声环境下的高质量通话。</p>
			<p>图</p>
			<p>2</p>
			<p>1:</p>
			<p>iPhone</p>
			<p>8</p>
			<p>的次麦克风手机位于摄像头附近</p>
			<p></p>
			<p>手机上设有的两个电容式麦克风尽管作用不同，但是其性能相同，对环境中声音信号的收集能力基本没有差别。如果利用双麦克风系统的时间同步 (主麦和降噪麦都是集成于同一个设备的，底层数据的收集也是同步录制，故信号是完全时钟同步的) 特性，即使两个麦克风 (如图 2 2) 之间的距离较短 (16cm 左右，不同手机略有差异)，也可以根据双麦采集的信号计算出声源信号到达两个麦克风的信号时延样本点数，并进而计算出声源到双麦的到达时间差 (TDOA)，不仅如此，利用双麦克风系统智能手机也规避了两路信号时钟同步的问题。</p>
			<p>图</p>
			<p>2</p>
			<p>2:</p>
			<p>双麦手机，以三星</p>
			<p>S5</p>
			<p>手机为例</p>
			<p></p>
			<p>目前国内外也已经有许多基于双麦系统实现以声源定位为基础的有趣的研究成果。<span class='q'>例如 Sunke 利用双麦克风智能手机进行手势轨迹感知[7]?</span><span class='q'>Aarab 使用双麦克风节点定位的思路测算说话人的位置[8]。</span></p>
			<p>2.2 智能手机的传感器</p>
			<p><a href='result-59252823.html' target='resultFrame'><span class='s'>随着技术的进步，手机已经不再是一个简单的通信工具，而是具有综合功能的便携式电子设备。</span></a>大多数的 ios 和 Android 设备都有许多内置传感器，用来测量运动，屏幕方向和各种环境条件，这些传感器能够提供高度精度的数据信息，非常适合用来测量设备的三维移动和定位，以及实时监测周围环境，例如可以跟踪设备的重力传感器推断用户的手势和动作，同样天气应用中将会使用设备集成的湿度和温度传感器。<span class='q'>智能手机的内置传感器有硬件实现和软件实现之分[9]。</span>硬件层的传感器是手机或者平板设备内置的物理组件，这类传感器通过直接获取特定的环境信息 (如加速度，地磁场强度或者角度变化等) 来采集数据。<a href='result-59252839.html' target='resultFrame'><span class='s'>软件层的传感器则不是物理设备，其数据则是从一个或者多个硬件传感器中获取，例如线性加速度传感器。</span></a>具体可参考表 2 1。本章将会简述实验中涉及使用的几种传感器。</p>
			<p>表 2 1: Android 平台支持的传感器类型</p>
			<p>	传感器</p>
			<p>	类型</p>
			<p>	说明</p>
			<p>	常见用途</p>
			<p></p>
			<p>	ACCELEROMETER</p>
			<p>	硬件</p>
			<p>	加速力</p>
			<p>	动态检测</p>
			<p></p>
			<p>	AMBIENT_TEMPERATURE</p>
			<p>	硬件</p>
			<p>	环境室温</p>
			<p>	监测气温</p>
			<p></p>
			<p>	GRAVITY</p>
			<p>	软件或硬件</p>
			<p>	重力</p>
			<p>	动态检测</p>
			<p></p>
			<p>	GYROSCOPE</p>
			<p>	硬件</p>
			<p>	旋转速率</p>
			<p>	旋转检测</p>
			<p></p>
			<p>	LIGHT</p>
			<p>	硬件 环境光级（照度</p>
			<p>	控制屏幕亮度</p>
			<p></p>
			<p>	LINEAR_ACCELERATION</p>
			<p>	软件</p>
			<p>	加速力</p>
			<p>	监测单个轴向上的加速度</p>
			<p></p>
			<p>	MAGNETIC_FIELD</p>
			<p>	硬件</p>
			<p>	环境地磁场</p>
			<p>	创建罗盘</p>
			<p></p>
			<p>	ORIENTATION</p>
			<p>	软件</p>
			<p>	旋转角度</p>
			<p>	确定设备位置</p>
			<p></p>
			<p>	PRESSURE PROXIMITY</p>
			<p>	硬件	环境气压	监测气压变化</p>
			<p>硬件 物体到屏幕的距离 通话过程中手机的位置</p>
			<p></p>
			<p>	RELATIVE_HUMIDITY</p>
			<p>	硬件 环境的相对湿度 露点，绝对湿度和相对湿度</p>
			<p></p>
			<p>	ROTATION_VECTOR</p>
			<p>	软件或硬件</p>
			<p>	设备</p>
			<p>	动态检测和旋转检测</p>
			<p></p>
			<p>	TEMPERATURE</p>
			<p>	硬件</p>
			<p>	设备</p>
			<p>	监测温度</p>
			<p></p>
			<p></p>
			<p>在传感器框架下采用三轴坐标系，其坐标系是相对于设备屏幕设定的，其设定如图 2 3所示。在后续的陀螺仪，加速度传感器，地磁场传感器中，上述坐标系均试用。</p>
			<p>图</p>
			<p>2</p>
			<p>3:</p>
			<p>传感器坐标系</p>
			<p></p>
			<p>2.2.1 陀螺仪</p>
			<p><a href='result-59253147.html' target='resultFrame'><span class='s'>陀螺仪，其原理基于角动量守恒定理，是一种用于感知测量和维持方向的装置。</span></a><a href='result-59253151.html' target='resultFrame'><span class='s'>陀螺仪常用于导航，定位等系统。</span></a><a href='result-59253155.html' target='resultFrame'><span class='s'>在 Android 系统中，陀螺仪测量的是围绕设备的 x，y 与 z 轴的旋转速率（弧度/秒）。</span></a>通常情况下，我们利用陀螺仪的输出数据进行关于时间的一次积分，从而获得角度随时间变化累积的转角。但是，在本文中判定设备是否“静止”的问题上，对陀螺仪的时刻输出设定一个硬阈值，当输出数据的 (绝对值) 超过阈值是，即可认为在设备处于运动中。<a href='result-59253167.html' target='resultFrame'><span class='s'>从而避免积分中的漂移问题。</span></a></p>
			<p>2.2.2 加速度传感器</p>
			<p><a href='result-59253177.html' target='resultFrame'><span class='s_l'>加速度传感器又称为加速计，用于测量设备在运动状态下的加速度的传感器。</span></a>高灵敏度的加速计用于飞机和导弹的惯性导航系统中，在无人飞行器中，加速计有利于保持稳定飞行。加速计的应用相当广泛，几乎所有的智能手机都包含加速计。尽管加速计的数据中包含了重力场的成分，但是在本文的使用中并不计较其细节，因此我们不对其进行深入解析。目前的智能手机下对加速计的应用很多，例如常见的计步器，微信“摇一摇”等。</p>
			<p>2.2.3 磁力传感器</p>
			<p><a href='result-59253203.html' target='resultFrame'><span class='s'>磁力传感器又称磁力仪，高斯计，是用于测量地球磁场的仪器。</span></a>谈及磁力计，其主要的应用就是手机自带的指南针。在 Android 系统中，开发者不仅提供了获取磁力值的接口，同时也提供了磁力计与加速计结合获得方向的接口，因此，通过这方面的应用，将会给用户一个地理方位的指示。</p>
			<p>2.2.4 屏幕方向传感器</p>
			<p><a href='result-59253223.html' target='resultFrame'><span class='s'>方向传感器属于软件传感器，安卓平台提供方向传感器用于判断设备的位置。</span></a><a href='result-59253227.html' target='resultFrame'><span class='s'>其数据是通过加速度传感器和磁场传感器共同获得的。</span></a><a href='result-59253231.html' target='resultFrame'><span class='s'>至于其算法细节我们不必去关心。</span></a>由于繁重的处理操作，因此方向传感器的准确度和精确度都是会降低的。<a href='result-59253239.html' target='resultFrame'><span class='s_l'>具体而言，方向传感器在倾角为 0 时才可靠。</span></a><a href='result-59253243.html' target='resultFrame'><span class='s'>根据官方文档的描述，Android2.</span></a><a href='result-59253247.html' target='resultFrame'><span class='s'>2(API 级别 8) 已经弃用屏幕方向传感器，Android4.</span></a><a href='result-59253251.html' target='resultFrame'><span class='s_l'>4W(API 级别 20) 已经弃用屏幕方向传感器类型。</span></a>因此，Android 系统提供了另一种方法来来获取屏幕方向值，当我们注册好加速度传感器和地磁场传感器后，即可以通过调用 getRotationMatrix() 方法和 getOrientation() 方法来计算屏幕方向值。<a href='result-59253261.html' target='resultFrame'><span class='s'>屏幕方向传感器常应用 VR，AR，指南针等应用。</span></a></p>
			<p>2.3 信号时延计算原理</p>
			<p>对于具备双麦的智能手机，其主麦和降噪麦都处在“相同”的环境下，因此采集到的的两路音频信号必然具有较强的相关性。当我们要求解某一个声源的空间位置时，计算出声源到达两个麦克风的信号时延往往有着重要的作用。<a href='result-59253279.html' target='resultFrame'><span class='s'>对于到达时间差 (TDOA) 的获取主要有两种方法。</span></a></p>
			<p><a href='result-59253285.html' target='resultFrame'><span class='s'>第一种方法依赖于对信号到达时间 (TOA) 的测量 (或计算)，通过信号到达时间的差值来求得。</span></a>基于到达时间的方法对系统的时间同步要求就会很高，但是在信道传输特性相似的情况下，这种办法可以减少多径效应带来的误差。以二维空间为例，如图 ( 2 4), 根据信号到达时间可以得到关于到达时间差的方程如下:</p>
			<p>(21)</p>
			<p>(22)</p>
			<p>由于依赖于 TOA 的值，微小的测量误差或者同步信号误差，就会引起 TOA 较大的误差，进而可能导致计算出的 TDOA 的精度降低，因此在后续的实验中没有采用这种方式求解时延。</p>
			<p>图</p>
			<p>2</p>
			<p>4:</p>
			<p>TDOA</p>
			<p>算法示意图</p>
			<p></p>
			<p><a href='result-59253339.html' target='resultFrame'><span class='s'>第二种方法是将采集到的信号进行相关运算，从而得到到达时间差 (TDOA) 的值。</span></a>在实际应用中，系统往往很难做到严格的同步，因此在大多数的定位方案中，也常常用相关估计的方法求解 TDOA 的值，再进行后续的定位计算。在主流的基于无线传感网的定位方案中，这种方法对网络的要求低，故而通过该方法测量 (计算) 更具有实践意义。</p>
			<p>广义互相关的基本思想是对已经经过滤波等信号处理的两路信号 x1(t) 和 x2(t)，求其互相关函数，其原理框架如图 ( 2 5) 所示，其公式表达为:</p>
			<p><a href='result-59253357.html' target='resultFrame'><span class='s'>τdelay = argmax((f ?</span></a> g)(t))	(2 3) t∈R</p>
			<p>图</p>
			<p>2</p>
			<p>5:</p>
			<p>互相关函数求解时延流程</p>
			<p></p>
			<p>在利用线性卷积计算时，常常可以借助线性卷积的关系来实现利用频域 FFT 的方式计算互相关，这种方法将比传统的时域计算法极大的减少计算量。<a href='result-59253389.html' target='resultFrame'><span class='s_l'>根据维纳辛钦定理: 平稳信号的自相关函数与其功率谱密度互为傅里叶变换对，因此相对应的，利用频域下的功率的互功率谱可以计算时域的互相关函数。</span></a><a href='result-59253393.html' target='resultFrame'><span class='s_l'>最后通过峰值检测器求解出时延。</span></a>需要说明的是，麦克风采集的信号是离散的，因此时延可以看做是几个采样点数的差距，通过麦克风的采样率，我们将可以把计算的采样点数的差距转换成时间的差值。</p>
			<p>2.4 基于到达时间差的定位算法设计</p>
			<p>上一节简要描述了利用互相关估计求解信号时延的方法，这一小节将会描述利用求解出的到达时间差 (TDOA) 进行后续的声源定位。</p>
			<p>2.4.1 二维空间下的定位分析</p>
			<p><a href='result-59253420.html' target='resultFrame'><span class='s'>我们首先从二维空间下进行定位分析。</span></a>首先可以明确的是，根据到达时间差，结合声速 (vsound) 我们可以求解出声源到两个麦克风的距离差 (?d)，从而由方程 ( 2 4) 因此在二维空间下，相对于手机中心和手机坐标系，我们可以得到一个以智能手机麦克风节点为焦点的双曲线，而声源则在其中的某一支曲线上。同理，当我们移动手机至别的位置，那么就又可以得到一支曲线，如图</p>
			<p>( 2 6), 则两个曲线的交点就是声源的所在位置。</p>
			<p>		(2 4)</p>
			<p>图</p>
			<p>2</p>
			<p>6:2</p>
			<p>维双曲线定位</p>
			<p></p>
			<p>2.4.2 三维空间下的定位分析</p>
			<p>拓展至三维空间中，同样，我们可以根据到达时间差，计算出声源到两个麦克风的距离差，因此在三维空间中，如图 ( 2 7) 我们可以根据公式 ( 2 5) 得到一个双叶双曲面，而声源则可以在其中的某一个面上。同理，通过改变位置，我们可以获得更多的双曲面，进而求解出声源的所在位置。</p>
			<p></p>
			<p>(2 5)</p>
			<p>图</p>
			<p>2</p>
			<p>7:3</p>
			<p>维双曲面定位</p>
			<p></p>
			<p>2.4.3 离线计算下的定位算法分析和设计</p>
			<p>通过公式 2 4和公式 2 5, 不难看出，关于声源位置的方程组是非线性的。而且，一方面，我们不能保证到达时间差 (TDOA) 的测量总是不存在误差的，另一方面，我们也知道声速也并非固定不变，正如公式 2 6所描述的那样，因此对于测量 (计算) 出的到达时间差，必然会存在或多或少的误差，这对后面定位精度的影响也是不可预测的。但是，由于我们变换双麦的位置，因此就可以获得很多组数据，大量数据的冗余，使得该定位问题也就转换成了非线性的最优化问题。由于二维情况可以看做三维情况下的一种特殊情况，也就是 z = miciz，因此只对三维空间下的情况进行分析。</p>
			<p>	vs = 331.3 + 0.606 ?<a href='result-59253538.html' target='resultFrame'><span class='s'> Temperature	(2 6)</span></a></p>
			<p>为缩小搜索空间，在麦克风位置的布置上，可以采用固定其中一个麦克风结点的方式, 如图 ( 2 8所示，因此根据到达时间差 (TDOA)，可以得到如下的方程组。</p>
			<p>	ri2 = (x ? xi)2 + (y ? yi)2 + (z ? zi)2</p>
			<p>	(2 7)</p>
			<p></p>
			<p>	r02 = (x ? x0)2 + (y ? y0)2 + (z ? z0)2</p>
			<p>	(2 8)</p>
			<p></p>
			<p></p>
			<p>	?ri = ri ? r0 = c?ti,i = 1,2,3,...,m	(2 9)</p>
			<p>式中，ri 为声源到不同位置下的 mic2 的距离，?ri 为声源到固定的 mic1 的距离，c 为声波的传播速度，?ti 为不同位置下 mic2 与 mic1 的到达时间差。</p>
			<p>图</p>
			<p>2</p>
			<p>8:3</p>
			<p>维结点布置示意</p>
			<p></p>
			<p><span class='q'>下面简要分析在三维空间下，基于 Chan 的到达时间差定位算法[10]。</span>由公</p>
			<p>式 2 7和 2 8不难得到:</p>
			<p>R2i,0 = ri2 ? r02</p>
			<p>(2 10) = (x ? xi)2 + (y ? yi)2 + (z ? zi)3 ? (x ? x0)2 ? (y ? y0)2 ? (z ? z0)2</p>
			<p></p>
			<p>ri2 = Ki ? 2xix ? 2yiy ? 2ziz + x2 + y2 + z2</p>
			<p>(2 12) Ki = xi2 + y2i + z2i</p>
			<p>而由基本的定义则有:</p>
			<p>	ri2 = (ri,0 + r0)2	(2 13)</p>
			<p>将公式 2 13代入 2 12中，于是有</p>
			<p>ri2,0 + 2ri,0r0 + r02 = Ki ? 2xix ? 2yiy ? 2ziz + x2 + y2 + z2 =?</p>
			<p>ri2,0 + 2ri,0r0 + (x ? x0)2 + (y ? y0)2 + (z ? z0)2 = Ki ? 2xix ? 2yiy ? 2ziz + x2 + y2 + z2 =? ri2,0 + 2ri,0r0 = Ki ? 2xix ? 2yiy ? 2ziz + 2x0x + 2y0y + 2z0z ? (x02 + y02 + z02) = ri2 ? r02 =?</p>
			<p>ri2,0 + 2ri,0r0 = ?<a href='result-59253735.html' target='resultFrame'><span class='s'>2(Xi,0 · x + Yi,0 · y + Zi,0 · z) + Ki ?</span></a> K0 =?</p>
			<p>Xi,0 = xi ? x0,Yi,0 = yi ? y0,Zi,0 = zi ? z0 =? (2 14)</p>
			<p>将上式转换为矩阵形式</p>
			<p>? x[</p>
			<p></p>
			<p>R2i,0 = ri2 ? r02 = ?2 Xi,0 Yi,0i Z1,0 ] y ?+ Ki ? K0 (2 15) ?? z ??</p>
			<p>通过上面所描述的这种转化，可以消除未知数的平方项，而只保留了一次项, 根据 i 的不同取值，可以得到了一系列的线性方程组。</p>
			<p>	R22,0	2	0 ?	? X12,,00	Y12,,00	Z12,,00 ? ? x ?</p>
			<p>	R	? K + K = ? X	Y	Z	?	y</p>
			<p>	...	...	...	...	z</p>
			<p>(2 16)</p>
			<p>	?? R12,0 ? K1 +??K0 ???	? X21,,00	Y12,,00?? Z??12,,00 ????</p>
			<p></p>
			<p>1</p>
			<p>	h = 2 ?	R	,G = ? X	Y	Z	,h = Gz0</p>
			<p>	0	??	...	??	?? ...	...	... ??	0</p>
			<p><a href='result-59253835.html' target='resultFrame'><span class='s'>其中 z 即为要求解的值。</span></a>当然，由于误差的存在，所以 Gz , h, 误差向量为 ? = h ? Gz0。只需要 3 个 TDOA 测量 (计算) 值，就可以通过计算得到声源的位置 (x,y,z)。但是可以通过利于冗余数据，从而可以获得更好的拟合值。于是通过加权最小二乘法获得初始的估计解，再利用估计解和其他条件进行第二次加权平均，对得到的估计值进行优化。<span class='q'>在 Chan 算法定位问题[10]</span><a href='result-59253857.html' target='resultFrame'><span class='s_l'> 中有具体算法的描述和分析，这一方面不是本文的重点，因此不做赘述。</span></a></p>
			<p>2.4.4 在线指引下的寻迹方式</p>
			<p>在前一小节中，我们简要描述了离线处理中，通过基于 Chan 的到达时间差算法计算出未知声源的方法。<a href='result-59253871.html' target='resultFrame'><span class='s_l'>这种方法尽管操作方式复杂，但是却可以获得较为准确的结果。</span></a>然而，在实际的定位中，在短距离的室内环境中，我们也不是对周围的事物“视而不见”，因此往往一个简单的方向指引就具有很好的参考意义。因此，对于三维的空间定位，在一定程度下，仅仅二维的指引就可以作为较好的参考方向。</p>
			<p>如图 ( 2 9) 中，我们获取了一个以麦克风为焦点的双曲线，同样，我们也就获得双曲线的渐进方向。而当声源距离麦克风中心较远时，渐进线的方向就是对声源方位的一个很好的指引。如果我们希望定位方式从离线状态下计算位置，转移到在线的指引我们去寻找的话，这种方向指引无疑是一种很好的途径。<a href='result-59253897.html' target='resultFrame'><span class='s'>后文中，我们将对这个问题做具体描述。</span></a></p>
			<p>图</p>
			<p>2</p>
			<p>9:2</p>
			<p>维空间指引</p>
			<p></p>
			<p></p>
			<p>	毕业论文	陈勇虎</p>
			<p>	毕业论文	陈勇虎</p>
			<p></p>
			<p>4</p>
			<p>14</p>
			<p>15</p>
			<p>第三章 基于双麦系统智能手机的声源定位方案</p>
			<p>近些年来，智能设备尤其是智能手机已经普及，智能设备上传感器的集成和发展，也使得智能手机的功螚越来越丰富。在前面我们已经简述到现阶段的智能手机，都已经普及使用双麦系统，其中的降噪麦克风也是为了有效抑制我们在日常通话中的环境噪声，并且也分析到两个麦克风是时钟同步的。<span class='q'>因此，利用智能手机的优势，通过获取同一个手机两个麦克风的声音数据，我们从中过滤出我们想要的声音信号，就可以得到两路严格同步的声音信号，并进而可以通过广义互相关的方法求解出声源到两个麦克风的信号时延，对计算出的信号时延进行后续的处理，就可以实现一些有意义的功能[11]。</span></p>
			<p>在前一章的基础上，本章详细描述数据收集方案，采集到的底层信号的预处理过程，并分析其特征。<a href='result-59253973.html' target='resultFrame'><span class='s_l'>因为声音信号的非平稳性，所以预处理操作尤为重要。</span></a>本章节将会描述利用双麦克风手机实现定位功能的诸多细节性工作，从而用于后续的定位分析。</p>
			<p>3.1 离线数据预处理流程</p>
			<p>本小节中，首先介绍离线状态下的数据预处理流程，并逐渐过渡到系统后续使用的在线指引模型的数据处理流程。由于麦克风收集的信号是一种非平稳的带宽信号，因此需要对收集的信号进行预处理操作，否则，由于噪声等环境因素的影响，会使得实验效果很不理想。</p>
			<p>在离线数据处理流程中，通过智能手机收集声音文件并记录为一个 wav 文件，通过 MATLAB 分析该 wav 文件，最终计算出到达时间差。该离线数据算法处理流程是为了通过处理一段时间窗口内，设备没有发生大幅度状态变化 (包括角度，位置等参数) 的情况下，计算出静态声源相对于该位置的方向 (Speaker Direction Finding (SDF))。在分析阶段，包括滤波，加权移除异常点，加窗分帧，端点检测等必要操作，在一段时间窗口内的处理流程具体如下图所示 ( 3 1).</p>
			<p>图 3 1: 离线数据处理流程</p>
			<p></p>
			<p>3.2 数据采集</p>
			<p>本文利用一部具有双麦系统的智能手机 (Samsung Galaxy S5) 作为信号采集的设备，在分析阶段，使用 MATLAB 科学工具对采集到的声音信号进行处理和显示。我们利用另一台智能手机 (Vivo Y93S) 发出了一个频率在 2000Hz2700Hz 变换的线性调频信号, 如图 3 2所示，图中蓝色的标记为 LY 的数据以及红色的标记为 RY 的数据，分别代指两个麦克风采集的数据。<a href='result-59254036.html' target='resultFrame'><span class='s_l'>图中的上一部分图中，横坐标代指数据采样点，纵坐标是对数据进行标准化后的结果，因此无量纲。</span></a><a href='result-59254040.html' target='resultFrame'><span class='s_l'>但是在下部分图中，横坐标是标准化的频率, 单位为 π?</span></a><span class='q'>radians/sample(频率标准化的相关概念不做赘述，可以参考[12]</span>)，纵坐标为能量谱，这里我们很容易看出两个麦克风的采集的数据的能量谱是非常接近的，换句话说，两个麦克风的采集能力非常接近。这里我们对原始数据取样其中发声部分中连续的 400 个样本点。如图 3 3所示，同样我们依然可以看出两个麦克风的采集能力是非常接近的，另一方面，即便我们暂时无法确定到达时间差 (TDOA) 的值，但是我们可以清晰看出收集到两路声音数据只是差了几个样本点的，因此只要计算出信号相差的样本点数，就可以根据采样率 (44.1kHz) 进而求解出 TDOA 的近似的结果。</p>
			<p>图</p>
			<p>3</p>
			<p>2:</p>
			<p>双麦克风信号</p>
			<p></p>
			<p>图</p>
			<p>3</p>
			<p>3:</p>
			<p>双麦克风信号取样</p>
			<p></p>
			<p>下表中 3 1展示了测试手机 (Samsung Galaxy S5) 的参数，后续实验中使用了华为 mate20 手机作为实验设备，S5 和华为手机上也都配备了两麦系统，目前智能手机录音的采样频率主要为 44.1kHz，16bit 量化。大部分手机都支持包</p>
			<p>括 8kHz/8bit、11.025kHz/8bit、22.05kHz/16bit 和 44.<a href='result-59254124.html' target='resultFrame'><span class='s'>1kHz/16bit，因此两个设备并无太大差异。</span></a></p>
			<p>表 3 1: SamSung Galaxy S5 测试设备参数参数</p>
			<p></p>
			<p>描述麦克风距离 16cm</p>
			<p>最高采样频率 44.1kHz 方向传感器 不支持</p>
			<p></p>
			<p>但是需要补充说明的是，智能手机在录制性能上还是有些许差异的，通过调研，华为手机 ( 3 4) 在录制方面从频谱低端到大约 17kHz 都能出色的再现自然的声音，而三星手机则在高频端有更好的性能。由于设备的局限性，在后续声源方面，依然可以通过非超声波作为信号载体实现定位。另一方面，华为手机的空间感方面性能也更优，对数据采集的灵敏度也高一些。所以在后续实验中以华为手机作为接收设备，而用普通的 Vivo 手机发出声波即可。</p>
			<p>图</p>
			<p>3</p>
			<p>4:</p>
			<p>华为手机录制性能</p>
			<p></p>
			<p>本文采用具有双麦系统的 S5 手实时采集环境的声音信号，在 Android 系统底层获取的声音数据实际是个一维数组，当然利用 MATLAB 进行读取，会转换成两个一维数组，分别代表两个麦克风的数据。<a href='result-59254195.html' target='resultFrame'><span class='s'>在原始的底层存储中，一维数组的值即是采集到的数据。</span></a>如图 3 5所示，实验中，我们采用 16bit 的 stero 的格式进行采集，因此根据图中的存储方式很容易分别获得两个麦克风的数据，并且两组数据是完全满足时钟同步的。为了区分声源和环境噪声，本文中对采集的信号设置了一个能量阈值，当每个 buffer 中信号的能量超过于该阈值时，则认为采集到的了声源数据，而当 buffe 中的信号能量低于该阈值时，则没有采集到的声音数据。<a href='result-59254209.html' target='resultFrame'><span class='s'>最后对采集到的的数据进行后续的信号处理。</span></a></p>
			<p>图</p>
			<p>3</p>
			<p>5:</p>
			<p>数据存储方式</p>
			<p></p>
			<p>3.3 声音数据处理</p>
			<p>智能手机从底层获得的两路麦克风数据中，既包括了采集到的的声源信号，尽管室内环境较为安静，但是同时也会有环境噪声以及其他各种异常信号，本小节将会利用自带的滤波器除噪以降低噪声的影响，同时使用加窗移动的方式降低数据中的异常值的影响，从而实现对原始录制的信号进行清洗处理，后续将会进行分窗加帧，端点检测等为后续到达时间差的计算做准备。</p>
			<p>3.3.1 滤波除噪</p>
			<p>由于信号采集中也会含有噪声成分，这对我们声源定位无疑会造成很大的影响，因此我们应该去除非声源发声的成分，提高声源的成分。常见的去噪方式就是使用滤波器，这里我们使用带通滤波器，降低环境中噪声的干扰。在 MATLAB 通过 filter,designfilter 函数我们很容易实现我们需要的功能，在后续的在线算法处理流程中，因为程序运行在 Java 平台上，所以 Android 系统方面可以通过使用 dsp?collection 这一个 jar 包来满足我们需要的功能。</p>
			<p>例如当我们的声源频率范围在 2000Hz?2700Hz 时，那么在除噪的过程中，我们就需要通过一个带通滤波器，减益非该频率范围的成分。<a href='result-59254283.html' target='resultFrame'><span class='s'>如图 ( 3 6) 所示，横纵坐标信息同图 ( 3 2)。</span></a>通过滤波，不在制定频率范围的数据被大大减益，从而降低环境噪声对实验结果的影响。</p>
			<p></p>
			<p><a href='result-59254297.html' target='resultFrame'><span class='s'>((a)) 信号除噪之前 ((b)) 信号除噪以后图 3 6: (a) 信号除噪之前。</span></a>(b) 信号除噪以后。</p>
			<p>3.3.2 异常点移除</p>
			<p>对实验结果影响较大的还有异常数据，例如在看似稳定的声音信号中，由于降噪麦和主麦底层下硬件的问题，仍会有一些突变的声音信号。<a href='result-59254315.html' target='resultFrame'><span class='s'>这里采用对两路声音信号分开进行处理。</span></a>值得一提的是，由于采样率高达 44.1kHz，所以处理过程中去掉一些数据并不会造成较大的影响。<span class='q'>这里，我们采用滑动窗口的方式，使用加权平均移动 (WMA[13]</span>) 的方式进行处理。加权平均移动认为: 同一个窗口内的不同的数据对目标值都有着不相同的权重因子，因此目标值就可以看成窗口内数据和一个固定的权重函数的卷积。由于数据本身异常点并不是很多，并且使用传统的WMA就可以获得较好的效果，因此记 signalt 为 t 时刻的数据，采用下面的公式更新 t 时刻的信号值:</p>
			<p>signaltnew = WMAt = ? ?1 + · · · + 2p(t?n+2) + p(t?n+1) npt + (n 1)pt</p>
			<p>n + (n ? 1) + · · · + 2 + 1</p>
			<p>= × t?1 + (n ? 1) × signalt?1 + · · · + 1 × signalt?n+1 n signal</p>
			<p>n + (n ? 1) + · · · + 2 + 1</p>
			<p>(3 1) 经过上述处理后，数据变得更加光滑，并且从图 3 7中已经可以隐约可见到达时间差 (TDOA) 的大致范围。这里，LSD为第一个麦克风降噪后是数据，</p>
			<p>LSignaData代表降噪后数据经过异常点去除操作后的数据。</p>
			<p>图</p>
			<p>3</p>
			<p>7:</p>
			<p>异常点移除后的数据</p>
			<p></p>
			<p>3.3.3 分窗加帧</p>
			<p>尽管我们采集到的声音信号并不是平稳的，但是在较小的时间窗口中，比如几十毫秒级别的时间测度范围下，声音信号依然是近似平稳的。基于这个想法，可以把采集的声音数据，看做是一帧一帧的小时间窗口范围的信号的组成，每一帧的信号都可以看成独立的声音信号。在这个思想下，实际就是在声音数据添加了一个滑动窗口，窗口的移动速度在窗口长度的三分之一左右即</p>
			<p>可。如图</p>
			<p>(</p>
			<p>3</p>
			<p>8</p>
			<p>)</p>
			<p>图</p>
			<p>3</p>
			<p>8:</p>
			<p>数据分帧</p>
			<p></p>
			<p><a href='result-59254467.html' target='resultFrame'><span class='s'>由于在信号分帧中，我们基本上是不可能做到对信号的周期性截断，常常的解决方法是在时域上对信号进行加窗以调制信号，减少信号的频谱泄露。</span></a><span class='q'>常见的窗函数有矩形窗，汉宁窗和汉明窗[14]。</span><a href='result-59254471.html' target='resultFrame'><span class='s'>以 N 表示帧长，这三种窗函数的时域表达式如下所示。</span></a></p>
			<p>(1) 矩形窗的时域表达式:</p>
			<p>?</p>
			<p>1,0 ≤ n ≤ N ? 1?</p>
			<p></p>
			<p>w(n) =(3 2)</p>
			<p>???0,n = else</p>
			<p>(2) 汉宁窗和汉明窗的时域表达式:</p>
			<p>	w(n) = aN	(3 3)</p>
			<p>当 a0=0.5 时，为汉宁窗，当 a时，为汉明窗.</p>
			<p>对窗函数的性能区别我们不做过多描述，在制定频段的声音下，为了保持平滑，汉明窗的性能更优，但是由于声源信号是周期有规律的，因此两种窗函数在实际使用中性能接近。</p>
			<p>3.3.4 端点检测</p>
			<p>尽管我们采集的声音是“连续”采集的，但是仍然有可能部分数据帧中，并不没有录制到声源的信号，例如智能手机开启麦克风时，底层仍有一个异常的信号电平，这方面的超过了本文的论述内容，因此不做躲过解释。但是，即便如此，依然可以在数据处理中通过端点检测查找到有效的声源发源部分。在前文数据采集中，我们对数据采集设定了一个基于能量的硬阈值，虽然短时能量可能出现噪声特征值较大，或者声音混淆的情况，但是在实际实验中，由于室内环境噪声较小，利用短时能量依然可以满足我们的需要。<span class='q'>对这方面的优化依可以通过参考文献[15]</span><a href='result-59254542.html' target='resultFrame'><span class='s'> 中的对数能量特征进行优化。</span></a></p>
			<p>3.3.5 到达时间差计算</p>
			<p>本小节基于前期的信号处理后，获取到两个同步的，并且噪声，异常点数据都得到有效处理的分帧加窗后的数据，随后调用第二章讲解到的 GCC 算法对两路信号进行到达时间差 (TDOA) 计算 (估计)。具体原理已在前文说明，因此这里我们不再赘述其原理。</p>
			<p><a href='result-59254563.html' target='resultFrame'><span class='s'>由于接收到的声音信号来自于同一个声源，因此两路信号之间具有较强的相关性而与噪声无关。</span></a><a href='result-59254567.html' target='resultFrame'><span class='s_l'>通过描述的广义互相关方法，我们可以得到两路信号之间的时延差。</span></a>前文中我们也有说明，这里计算出的“时延”实际是两个信号相差的采样点数，但是，由于采样率为设定好的 44.1kHz, 因此可以通过计算出相差的采样点数，经过转换从而可以得到对应的时延，也就是实际的到达时间差 (TDOA)，后面我们用相差的采样点数代指到达时间差 (TDOA)，转换公式无需赘述。<a href='result-59254581.html' target='resultFrame'><span class='s_l'>可以明确的是，以 mic2 为标准，当 TDOA ＜ 0 时，mic1 先接收到信号， TDOA ＞ 0 时，mic1 后接收到信号，TDOA = 0 时，声波同时到达 mic1 和 mic2。</span></a><a href='result-59254585.html' target='resultFrame'><span class='s_l'>降至二维空间下，详情如图 ( 3 9) 所示。</span></a>需要注意的是，TDOA 的正负也是相对而言的，例如 mic1 早于 mic2 接收到信号，也就对应了 mic2 晚于 mic1 接收到信号。</p>
			<p>图</p>
			<p>3</p>
			<p>9:</p>
			<p>TDOA＞0,TDOA＜0,TDOA</p>
			<p>=0</p>
			<p></p>
			<p>3.3.6 到达时间差处理</p>
			<p>利用双麦手机作为接收设备，计算声波到达手机双麦的时间差，高达 44.1kHz 的采样使得我们可以得到大量的声音数据，并且计算出很多个数据段的到达时间差。因此鉴于数据量多的优势，那么我们就可以利用此优势进行数据的筛选。即便我们的某些到达时间差测量并不是足够“精确”，但是依然可以辅助进行方向探测。</p>
			<p>回到最初的系统设置，我们设置的采样率 44.1kHz，编码为 16bit，我们暂时不考虑高编码编码的精确度，但显然的是，由于使用的 bit 数较大，因此数据量化的范围也更大，因此数据也是更精确的。对于 44.1kHz 的采样率，麦克风每手机一秒钟，就可以采样到 44.1kHz 的采样点。实验中发现，如果将太多量的数据一次性进行计算，由于声源功率较小，信号衰减等，大部分测量结果都是不准确的。然而，另一方面，即便数据过多造成了结果不够准确，但是对数据分段，对该一秒钟的部分数据进行到达时间差的计算，在原理上也是对整段数据的到达时间差的估计，因为延迟是“全局”的延迟，通过实验我们也发现了这一个问题。因此，鉴于这种思想，前文中我们也说明了对信号进行分帧加窗，当然，由于在后续实验中设备会一直处理数据，我们对每 k 个连续数据进行分帧。从而，对两个麦克风相同次序的数据帧进行到达时间差 (TDOA) 计算，依然可以得到全局的到达时间差 (TDOA)，如图 ( 3 10)。</p>
			<p>图</p>
			<p>3</p>
			<p>10:</p>
			<p>数据分段示意</p>
			<p></p>
			<p>数据分帧之后，并进行对应的数据段的到达时间差 (TDOA) 的计算，从而可以产生一系列的到达时间差 (TDOA) 值。在实际计算中，我们设定帧长 k = 2048，很明显的是，对 k 的设定是一个 trade?off 的问题，若 k 值太小，数据点太少，基本无法得到合理的到达时间差 (TDOA) 值，如果 k 值较大，精度会有影响，实验中 k 暂取用 2048。由于 1s 中可以采集到 44100 个数据，因此帧移改为帧长，从而减少计算量。另一方面需要明确的时，实验中设备的麦克风距离约为 16cm, 因此，从采样点的角度看，到达时间差 (TDOA) 绝对值的最大值</p>
			<p>|TDOA|max 应该满足下式 (以 20℃ 的环境为例)：</p>
			<p>	|TDOA|max = 16/v ? 44100 ≤ 16/((331.3 + 20 ? 0.606) ? 100) ? 44100	(34)</p>
			<p>	= 16/(34342) ? 44100	(35)</p>
			<p>	≈ 20.546 ＜ 21	(36)</p>
			<p><a href='result-59254745.html' target='resultFrame'><span class='s'>由于采样点误差必然会有 0.</span></a><a href='result-59254749.html' target='resultFrame'><span class='s'>5 个采样点的误差范围，所以 TDOA 的范围应该在?</span></a>21 至 21 之间，这就是到达时间差采样点角度的合理值的区间。另一方面，虽然由于离散采样的问题，到达时间差 (TDOA) 的值最后应该取整数，但是我们也可以肯定的是，即便有 0.5 个采样点的误差，?distance = 0.5/44100 ? v ≤ 0.5/44100 ? 34342 ≈ 0.389cm, 对于 16cm 的麦克风距离来说，这个值微不足道。</p>
			<p>前面中我们提及到，每一帧的信号计算出的到达时间差应该符合或者接近于全局的到达时间差，基于这种原因，我们使用以下的数据筛选方案进行数据综合数理 (下以 TDOA 代指采样点角度的到达时间差):</p>
			<p><a href='result-59254783.html' target='resultFrame'><span class='s'>(1) 每 m 秒中，准确来说，应该是每 ?</span></a>44100 ? m/2048? ? 2048 个数据，进行一个到达时间差的计算，在这一次的计算中，按照前文叙述的方法，每 k(k=2048) 个数据计算一次 TDOA 的计算，因此可以产生个 ?44100 ? m/2048? 个</p>
			<p>TDOA 的值。</p>
			<p>(2) 对于这些计算出的 TDOA 的值，如果有超过一半的值相同并且介于前面所说的合理值区间，那么我们就可以认定计算的 TDOA 有效，并且其符号包括数值都可以用于后续的处理算法中。</p>
			<p>(3) 如果无法满足 (2) 的条件，但是大部分值甚至所有值都是大于 0 或者小于 0，或者等于 0，只有极少的符号与整体不一致，这里我们定义极少为占比不超过 1/7, 那么仍然可以认为该组 TDOA 有效，不过此时我们只使用 TDOA 的符号，也就是大部分值的的符号，用于后续的方位判断。对于特殊情况，我们考察这些数值的众数，如果只有一个众数，如果众数在“大部分值”占比超过一半，那么我们使用该众数作为 TDOA 的数值? 如果存在多个众数，并且数值差值不超过 2，并且所有众数在“大部分值”中的占比超过一半，我们可以使用这些众数的均值作为 TDOA 的数值使用，否则，在 (3) 中，我们只使用 TDOA 的符号。</p>
			<p>(4) 如果 (2)(3) 的处理条件都无法满足的话，则认为这一次计算的结果无效。</p>
			<p>但是，当 TDOA 不为 0 的时候，信号能量会有较为明显的对比，因此对于符号的判断基本都可以保证，因此大部分测量结果至少可以返回一个合理的 TDOA 符号，因此大致方向可以确定。并且在离线处理中，取 m=1，就可以满足我们的实验需求。</p>
			<p>3.4 离线处理下的定位方法</p>
			<p>图 ( 3 9) 中，如果我们以 mic1 为左，以 mic2 为右，根据到达时间差的符号 (0,?1,1) 实际可以确定对于声源与中心关系，这里我们只简单定义为左，前，右三个方向。后续说明方位的时候，我们所指方向就是这里说明的左，前，后。</p>
			<p>由到达时间差 (TDOA) 我们很容易确定一个双曲线方程，对于双曲线的渐近线方向，就是对声源的很好一个指示，至少在 2D 的范围中是很好的一个标准。这里我们根据到达时间差 (TDOA) 的值和麦克风距离，就可以计算出渐近线的角度 (方向)，前文中我们对此进行了较为详细的描述。后续说明角度的时候，我们所指角度就是这里说明的角度。</p>
			<p>在室内环境 (图 3 11) 下，我们需要在整个空间坐标系下确定每次设备的所处的位置，也就是说，已经确定了图 3 11中 Positioni 的位置，随后我们在每个位置下录取一段音频，并进行到达时间差的计算，由于设备在三维空间中可以有很多的位置，因此，我们可以得到一系列的 Positioni，以及对应的 Xi,Yi,Zi,TDOAi。我们利用已经比较成熟的前文所描述的 Chan 算法即可计算出后续的结果，然而在实际操作中，由于位置精度测量本身的误差，因此可以尽可能的固定其中一个麦克风的位置，既方便与计算，同时其误差也小于变换位置后的测量误差。</p>
			<p>图</p>
			<p>3</p>
			<p>11:</p>
			<p>室内环境</p>
			<p></p>
			<p>3.5 离线计算到在线指引的迁移</p>
			<p>前面已经描述离线计算的定位犯法，正如第二章描述的那样，适当的方向指引依然有很强的指示作用。这一节讲解在线指引模型，通过降低对精度的要求，实现在线平台下的指引方案。</p>
			<p>3.5.1 概念阐述</p>
			<p>对数据的离线处理和定位计算尽管可以获得更为精确的结果，但是在实际操作中过于复杂，并且在实际寻找的过程中，我们也并不是“视而不见”，简单的提示信息或许就可以帮助我们的进行探测，因此我们降低了实际需求，从精确到 3D 指引降至 2.5D 的探测范围。<a href='result-59254951.html' target='resultFrame'><span class='s_l'>因此在离线定位算法的处理的基础上，我们提出了数据在线的处理流程。</span></a></p>
			<p>这里我们需要更新之前的处理流程，因为在数据在线处理流程中，麦克风处于一直的录音状态，因此有效声音提取部分也就不是那么重要，在前面的讲解中，我们指出无效声音段并不是声音信号的主体，因此可以直接抛弃一些数据。尽管数据的在线处理流程也可以看做多个离线处理的组成，但是在实际操作中，我们还是不希望在寻找过程中，在一个位置上长期停留，后续，我们引入一些机制进行一些状态的判断。</p>
			<p><a href='result-59254971.html' target='resultFrame'><span class='s'>首先，我们需要提出一种降维的思想。</span></a>如图 3 12, 记智能手机屏幕所在平面为 P1, 声源实际位置 S 与两个麦克风 mic1,mic2 所在平面为 P2，记 P1 和 P2 构成二面角为 α, 在 P2 中，声源位置 S 与智能手机中心的连线 l1 与麦克风所在直线 l2 夹角为 β, 声源在平面 P1 的投影 S′ 与智能手机中心的连线 l3 与麦克风所在直线 l2 夹角为 γ. 显然很容易得到 tanγ = cosα · tanβ.<a href='result-59254987.html' target='resultFrame'><span class='s'> 图中 l4 为平面 P1 上与麦克风所在直线 l2 夹角为 β 的直线。</span></a><a href='result-59254991.html' target='resultFrame'>尽管 α 的值我们无法获知，但是计算出一个粗略的 β，依然有一定的指导意义，因为在平面 P1 上，声源<span class='s_l'>投影的位置 S′ 的方向角 γ = arctan(cosα · tanβ)。</span></a></p>
			<p>图</p>
			<p>3</p>
			<p>12:3</p>
			<p>D</p>
			<p>降维指引</p>
			<p></p>
			<p>如果在平面 P1 上仍使用 β 作为指引的方向，那么，这里就会产生一个角度上偏离误差?θ = β ?<a href='result-59255028.html' target='resultFrame'><span class='s'> arctan(cosα · tanβ)，显然当 α 越大时，误差?</span></a><a href='result-59255032.html' target='resultFrame'><span class='s'>θ 越大 (这里 α 不超过 90 度)。</span></a>显然在实际运行过程中，我们并不需要考虑这种情况。这是因为实际过程中，智能手机并非是固定不动的，因此，稍微的转动就可以使得二面角发生较大的变化。如图 3 13所示，当手机位于 Loc1 时, 二面角 α 达到 90 度，但是只要稍微转动至 Loc2 处，就可以获得一个新的 α，甚至我们可以把手机移动到 Loc3 处。当手机的转动已经不能造成二面角 α 较大的变化时，我们也就来到了声源投影位置的附近区域，这样，声源的位置我们也就大致获得了。</p>
			<p>图</p>
			<p>3</p>
			<p>13:</p>
			<p>手机状态改变</p>
			<p></p>
			<p>3.5.2 在线处理算法模型</p>
			<p>在在线指引算法的模型下，我们需要引入一些机制，因为在在线指引的模型下，我们需要一个低要求的方向指引，而不再是准确的三维坐标。而且，在寻迹中，智能手机是动态移动的，而我们在计算到达时间差的过程中，必然是要保证麦克风位置时不变的。<a href='result-59255086.html' target='resultFrame'><span class='s'>因此对于状态的判断就显得尤为重要。</span></a>其次为了能够给予较好的方向指引，我们混合了地理方向等判断。</p>
			<p>前文中我们提到了麦克风采样率为 44.1kHz，因此在到达时间差和方向计算下，我们依然用滑动窗口的方式，窗口长度为 5s，而窗口移动的速度则设置为 1s，因此，第从 5s 开始后，系统将会每一秒反馈一个计算出的结果进行指引。</p>
			<p>3.5.3 状态判别</p>
			<p>在手机状态判别问题上，主要包括静止状态判定，声源位置方位判定。</p>
			<p>一方面，在静止状态判定问题上，我们自然可以采用时域下某个指标积分后的结果进行衡量，但是由于 Android 自带的传感器必然存在温差，零漂的问题，因此，我们采用陀螺仪瞬时值进行衡量。</p>
			<p>另一方面，在声源位置方位判断上，只是为了粗略估计声源是否发生了位置移动。在前文中，我们提及了声源相当于手机中心的“左右”位置关系，因此在在线指引的模型下，我们通过对“左右”关系进行检测，如图 ( 3 14) 所示，当我们等待过程中，如果系统反馈的声源方向在“左”(T0′ )“右”(T0) 关系上不恒定，那么我们将认为声源的位置在改变。尽管在后续实验中并不会出现这种情况，但是这是对实际应用下系统性能的优化。</p>
			<p>图</p>
			<p>3</p>
			<p>14:</p>
			<p>状态判别</p>
			<p></p>
			<p>3.5.4 陀螺仪数据使用</p>
			<p>首先我们需要确定手机处于“静止”状态，这里，尽管可以围绕麦克风所在直线旋转，但是在在线指引的模型下，我们不需要有这种操作，因此我们把这种状态也当做“非静止”的状态进行处理。以下给出一组围绕 X 轴依次旋转 90,180,270,360 度的采集到的数据，如图 ( 3 15)，分别表示三轴采集到的陀螺仪数据，横坐标为采样点，纵坐标陀螺仪数据，单位为弧度。从中可以看出，在设备绕 x 轴旋转的过程中，y,z 两轴同样会有数据的波动，但是，即便存在数据的波动，依然维持在 0 的附近，而发生运动的过程时，陀螺仪的数据就会有很大的波动，因此为了实际的应用场景，我们对三轴设定一个硬阈值，当陀螺仪数据 (的绝对值) 超过阈值时，则判定为设备发生了运动。</p>
			<p>图</p>
			<p>3</p>
			<p>15:</p>
			<p>陀螺仪三轴数据</p>
			<p></p>
			<p>3.5.5 加速计和磁力计的使用</p>
			<p>随后，为了辅助与实际方向结合，因此借用 Android 的加速计和磁力计，其实现细节不做过多描述。当我们在 Android 设备下注册了加速计和磁力计两个传感器后，就可以通过对 SensorManager 调用 getRotationMatrix 以及 getOrientation，即可获得屏幕朝向与磁极的夹角，从而获取当前的方向，因此在过程中，并没有对加速计和磁力计数据的直接使用。</p>
			<p></p>
			<p>	毕业论文	陈勇虎</p>
			<p>	毕业论文	陈勇虎</p>
			<p></p>
			<p>16</p>
			<p>32</p>
			<p>31</p>
			<p>第四章 模型系统实现与实验分析</p>
			<p>本系统是对前文所述的基于双麦克风手机的声源定位方案的实现，系统包括在线指引功能，离线计算等。离线计算的呈现方式是采取手机录音和 matlab 计算相结合的方式，在线指引的方式是制作成一个 Android 系统下的智能手机应用。此外，在声源方面，也是使用了一个自制的 Android 系统下的智能手机应用，该应用可以发出指定的声波，用于区分声源。</p>
			<p>4.1 开发环境与平台</p>
			<p>1. 硬件条件:</p>
			<p>1.1. 声源设备使用的是:Vivo Y93s</p>
			<p>1.2. 录音设备使用的是: 华为 Mate20</p>
			<p>2. 系统平台:</p>
			<p>2.1. 录音软件，声源发生软件都运行在 Android 系统下,</p>
			<p>2.2. 离线计算相关程序运行在 Windows 环境中，以 Maltab 程序的方式呈现</p>
			<p>3. 开发工具:</p>
			<p>3.1. 手机应用开发平台</p>
			<p>3.1.1.<a href='result-59255304.html' target='resultFrame'><span class='s'> Android Studio, 版本号:2.</span></a>3.3</p>
			<p>3.1.2. JRE: 1.8.0_112</p>
			<p>3.1.3.<a href='result-59255314.html' target='resultFrame'><span class='s_l'> JVM: OpenJDK 64?</span></a>Bit Server VM by JetBrains s.r.o</p>
			<p>3.2. Matlab 版本:9.4.0.813654 (R2018a)</p>
			<p>4.2 系统设计</p>
			<p>在系统实现上有两种版本，正如前文描述的那样，一个版本是通过在指定位置下进行录音并保存音频为 wav 文件，然后通过将录音位置和波形文件导入的 matlab 中进行线下的计算，以定位声源的位置；另一个版本则是在手机屏幕上实时进行录音和方向反馈，通过不断的方向指引帮助我们去寻找声源。由于第一种版本除了录音阶段在智能手机上运行，其他阶段在都在 matlab 上运行，而且两种版本实现方式有一定的重合部分，因此会在一起进行介绍，尤以第二个版本为重。</p>
			<p>4.2.1 多模块设计</p>
			<p><a href='result-59255356.html' target='resultFrame'><span class='s'>在系统运行中，各个模块功能的并行运行是突出的。</span></a>因此对在线指引系统中，系统涵盖的模块可以分为: 传感器监听模块，录音模块，数据处理模块，显示模块等。</p>
			<p><a href='result-59255366.html' target='resultFrame'>传感器监听模块:Android 的开发者已经对传感器提供了很好的接口，系统可以通过实例化一个<span class='s_l'> SensorManager 对象对传感器进行监听和数据读取。</span></a>在系统中注册了加速计，磁力计，陀螺仪三个传感器，并且实时监听器数据。系统运行时，从 SensorEvent 对象中读取传感器数据，在重写 onSensorChanged 方法中，根据数据进行相应的处理。</p>
			<p>录音模块: 需要说明的是，Android 6.0 以后为了用户隐私，将一些权限的申请放在了应用运行的时候去申请，所以申请麦克风权限也需要进行动态申请。当获取麦克风权限后进行录音，该模块会将录取的数据进行声道的分离，并将数据拷贝用于后续到达时间差的计算。</p>
			<p>数据处理模块: 该模块主要用于对录音数据进行到达时间差的计算，并且反馈指引所需的角度和状态判别。通过对指定长度的录音数据进行截取，先后经过滤波处理等清洗操作，最后调用自定义的 Correlation 进行计算。<a href='result-59255404.html' target='resultFrame'><span class='s'>在滤波操作中需要借助 dsp?</span></a><a href='result-59255408.html' target='resultFrame'><span class='s'>collection 这一个 jar 包的帮助。</span></a><a href='result-59255412.html' target='resultFrame'><span class='s'>最后计算的结果会传入到显示模块。</span></a></p>
			<p>显示模块: 显示模块通过传入的结果进行方向的绘制，主要依赖于 graphics 库进行界面的绘制。该模块的显示界面包括了方向指示，同时也会和地理方向相结合，方便用户寻找方向，相关的数据会反馈在界面上。</p>
			<p>此外，对于发声的设备，主要就是通过捕获用户的输入，从而产生相应的声波，由于实现难度并不是很大，所以不做过多的介绍。在前面所描述的系统核心和数据处理流程简图如下图 ( 4 1) 所示。</p>
			<p>图</p>
			<p>4</p>
			<p>1:</p>
			<p>系统流程和数据流简图</p>
			<p></p>
			<p>4.2.2 界面与运行方式</p>
			<p><a href='result-59255462.html' target='resultFrame'><span class='s_l'>下面给出系统给出的实时指引的应用界面，具体如下图 ( 4 2, 4 3) 所示。</span></a></p>
			<p>简要介绍应用功能，在图 ( 4 2) 中，通过选择波形和对应的频率数据，点</p>
			<p>击 PLAY 键将可以单声道播放对应的音频, 点击 PAUSE 即可暂停播放。</p>
			<p>图</p>
			<p>4</p>
			<p>2:</p>
			<p>发声</p>
			<p>app</p>
			<p>界面</p>
			<p></p>
			<p>在图 ( 4 3(a)) 中，通过选择录音，并且选择是否产生 wav 文件进行录音，期间可以绘制前一秒中部分的数据波形，在此界面下通过选择“产生 wav 文件” 生成相对应的录音文件并保存在手机存储中，通过多个位置的操作，从而可以获得一系列的 wav 文件，这些文件将应用于后期的离线计算。</p>
			<p>在在线指引的模型下，如图 ( 4 3(b))，系统会默认打开麦克风并开始采集数据，当手机状态“静止时”才会收集有效数据，当产生一定量的有效数据后，系统后台将会计算出目前声源相对应手机中心的方向，也就是图中的青绿色线，并且显示与手机 y 轴的夹角与当前的方向 (如图中” 西” 所示)，轮盘则是对应的地理方向，从而方便我们寻迹。</p>
			<p></p>
			<p>((a)) 离线采集数据界面 ((b)) 在线指引界面图 4 3: (a) 离线采集数据界面，(b) 在线指引界面</p>
			<p>4.3 系统功能实现</p>
			<p>4.3.1 录音模块功能</p>
			<p><a href='result-59255542.html' target='resultFrame'><span class='s'>数据采集阶段核心代码如算法 4.</span></a>1所示. 手机调用双麦不断捕获周围环境中声波信号，当一个信号帧中的平均能量高于预先设定的阈值，认为可能接收到了声源信号，并且将捕获的两路声音数据进行声道分离，从而进行数据清洗等操作。</p>
			<p></p>
			<p>算法 4.1 双麦智能手机的信号采集</p>
			<p></p>
			<p>1: mAudioRecord.<a href='result-59255570.html' target='resultFrame'><span class='s'>startRecording()</span></a></p>
			<p>2: //系统捕获环境中的音频数据</p>
			<p>3: while in recording do</p>
			<p>4:	//数据帧读入音频数据</p>
			<p>5:	read = mAudioRecord.<a href='result-59255592.html' target='resultFrame'><span class='s_l'>read(mBuffer, 0, BUFFER_SIZE)</span></a></p>
			<p>6:	if read ＜= 0 then</p>
			<p>7:	return false</p>
			<p>8:	else</p>
			<p>9:	//硬阈值初始判断</p>
			<p>10:	sum = accumulate()</p>
			<p>11:	//达到设定的阈值</p>
			<p>12:	if sum ＞ threshold * read then</p>
			<p>13:	//两路信号分离</p>
			<p>14:	index = 0</p>
			<p>15:	for i = 0 to mBuffer.length/2 do</p>
			<p>16:	if i % 2 == 0 then</p>
			<p>17:	System.arraycopy(mBuffer, i * 2, mBuffer1, 0, 2)</p>
			<p><span class='q'>18:	LY[index] = ((mBuffer1[0]</span><span class='q'>&0x000000FF) | (((int)mBuffer1[1]</span>)?8))/</p>
			<p>32768.0</p>
			<p>19:	LYList.add(LY[index])]</p>
			<p>20:	index = i / 2</p>
			<p>21:	else</p>
			<p>22:	System.<a href='result-59255679.html' target='resultFrame'><span class='s_l'>arraycopy(mBuffer, i * 2, mBuffer2, 0, 2)</span></a></p>
			<p><span class='q'>23:	RY[index] = ((mBuffer2[0]</span><span class='q'>&0x000000FF) | (((int)mBuffer2[1]</span>)?8))/ 32768.0</p>
			<p>24:	RYList.add(RY[index])]</p>
			<p>25:	end if</p>
			<p>26:	end for</p>
			<p>27:	end if</p>
			<p><a href='result-59255709.html' target='resultFrame'><span class='s'>28:	//other code for further data?</span></a><a href='result-59255713.html' target='resultFrame'><span class='s'>processing</span></a></p>
			<p>29:	end if</p>
			<p>30: end while</p>
			<p></p>
			<p>4.3.2 数据处理模块功能</p>
			<p>通过麦克风采集获取的数据，将要经过滤波等清洗后并分帧进行计算。其</p>
			<p>处理流程如伪代码 4.2所示。</p>
			<p></p>
			<p>算法 4.2 data?<a href='result-59255752.html' target='resultFrame'><span class='s_l'>processing(数据处理功能)</span></a></p>
			<p></p>
			<p>1: //数据清洗</p>
			<p>1.1: //filter(dsp) 滤波</p>
			<p>LSignalData = filter(bpFilt,LY)</p>
			<p>RSignalData = filter(bpFilt,RY)</p>
			<p>1.2: //RemoveOutliers 异常点移除 LSD = RemoveOutliers(LSignalData,m)</p>
			<p>RSD = RemoveOutliers(RSignalData,m)?</p>
			<p>2: //分帧加窗</p>
			<p>2.1: LY_enframe = my_enframe(LSD, frameLen, overLoap, ’rect’)</p>
			<p>2.2: RY_enframe = my_enframe(RSD, frameLen, overLoap, ’rect’)</p>
			<p>3: //端点检测</p>
			<p>3.1: [VSDst,VSDed] = myVSD(LSD,RSD,Unit,m)</p>
			<p>3.2: VLSD = LSD(VSDst:VSDed)</p>
			<p>3.3: VRSD = RSD(VSDst:VSDed)</p>
			<p>4: //到达时间差计算</p>
			<p>4.1: //状态检测</p>
			<p>4.2: //调用自定义的 Tdoa 函数对两路信号进行计算</p>
			<p>4.3: [TDOA,Sign] = myTdoa(VLSD,VRSD,N,”True”)</p>
			<p>5: //方向角度计算与显示</p>
			<p></p>
			<p>4.3.3 传感器监听模块功能</p>
			<p><a href='result-59255844.html' target='resultFrame'><span class='s'>通过注册和监听传感器，并实时获取传感器数据进行处理。</span></a>其处理如伪代</p>
			<p>码 ( 4.3) 所示。</p>
			<p></p>
			<p>算法 4.3 sensor?<a href='result-59255861.html' target='resultFrame'><span class='s_l'>listering(传感器监听)</span></a></p>
			<p></p>
			<p>1: //传感器注册</p>
			<p>2: //传感器管理器对象</p>
			<p>3: mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE)</p>
			<p>4: //传感器对象</p>
			<p>5: mGyroscope = mSensorManager.getDefaultSensor(GYROSCOPE...)</p>
			<p>6: mAccelerometer = mSensorManager.getDefaultSensor(ACCELEROMETER...)</p>
			<p>7: mMagneticField = mSensorManager.getDefaultSensor(MAGNETIC_FIELD...)</p>
			<p>8: //传感器监听器注册</p>
			<p><a href='result-59255920.html' target='resultFrame'><span class='s_l'>9: mSensorListener = new SensorEventListener(){.</span></a>..}</p>
			<p>10: //监听器方法重写</p>
			<p>11:	//陀螺仪数据</p>
			<p><a href='result-59255934.html' target='resultFrame'><span class='s_l'>12:	gyroscopeValues = event.</span></a>values</p>
			<p>13:	//设备动态监测</p>
			<p>14:	IsMove(gyroscopeValues)</p>
			<p>15:	//加速计数据</p>
			<p><a href='result-59255954.html' target='resultFrame'><span class='s_l'>16:	accelerometerValues = event.</span></a>values</p>
			<p>17:	//磁力计数据</p>
			<p><a href='result-59255966.html' target='resultFrame'><span class='s_l'>18:	magneticFieldValues = event.</span></a>values</p>
			<p>19: //获取方向</p>
			<p>20:	getRotationMatrix(rotation, null, accelerometerValues,magneticFieldValues)</p>
			<p>21:	getOrientation(rotation, orientation)</p>
			<p>22:	//获取方向，并更新界面</p>
			<p>23:	chaosCompassView.<span class='q'>changeVal(orientation[0]</span>,degree)</p>
			<p>24: //传感器监听</p>
			<p>25: mSensorManager.registerListener(mSensorListener, mGyroscope,...)</p>
			<p>26: mSensorManager.<a href='result-59256018.html' target='resultFrame'><span class='s_l'>registerListener(mSensorListener, mAccelerometer,.</span></a>..)</p>
			<p>27: mSensorManager.<a href='result-59256028.html' target='resultFrame'><span class='s_l'>registerListener(mSensorListener, mMagneticField,.</span></a>..)</p>
			<p></p>
			<p>4.3.4 显示模块</p>
			<p>显示模块通过在界面已经展示，由于其实现细节主要就是对 graphics 库应用，与本文主要内容无关，因此在此不做描述。</p>
			<p>4.4 系统性能测试和分析</p>
			<p>本文工作的过程伴随着大量的数据分析和实验验证，下面对基于完整的双麦定位实验，以离线的定位计算模型为例，给出数据展示和分析。</p>
			<p>在离线的定位计算模型下，在前文的定位分析下，可以如图 ( 4 4) 所示放置智能手机和声源手机，并进行录音，其中 mic1 为主麦，mic2k 为降噪麦依次部署的位置示意，喇叭即为声源手机放置的位置，需要说明的是，为了测量高度，因此在多次放置中，必须存在节点与其他节点不在同一平面内，如图中的 mic2i 节点即表示位置高于水平面。</p>
			<p>图</p>
			<p>4</p>
			<p>4:</p>
			<p>设备放置示意</p>
			<p></p>
			<p><a href='result-59256088.html' target='resultFrame'><span class='s'>随后，在三维空间下，mic1 为坐标原点建立坐标系。</span></a><a href='result-59256092.html' target='resultFrame'><span class='s_l'>在室内环境下，环境非常安静，异常噪声也很少，因此数据的波动很小。</span></a>通过发声手机进行周期声音的播放，并且在不同位置下进行录音。<a href='result-59256100.html' target='resultFrame'><span class='s'>我们捕获了其中收集到一组数据，如图 ( 4 5) 所示。</span></a>其中 LY，RY 代指两路麦克风收集到的信号，从中看出，尽管信号受到底层录音设备和微弱的噪声影响，会出现信号波动，但是我们仍然可以看出原始信号的周期性。利益方面，通过实际距离检测，该声源位置的空间坐标约为 (200,300,117), 其到达两个麦克风的距离差为 8.1995cm, 约为 8.20cm。</p>
			<p>图</p>
			<p>4</p>
			<p>5:</p>
			<p>底层原始数据部分采样</p>
			<p></p>
			<p>根据我们在第四章的处理细节，对信号依次进行滤波加噪，异常点移除操作，对数据进行清洗，数据如图 ( 4 6, 4 7) 所示。图中 LSignalData， RsignalData 代指经过滤波除噪后的两路信号，LSD，RSD 代指异常点移除后的数据。</p>
			<p>图</p>
			<p>4</p>
			<p>6:</p>
			<p>滤波除噪后数据采样</p>
			<p></p>
			<p>图</p>
			<p>4</p>
			<p>7:</p>
			<p>异常点移除数据采样</p>
			<p></p>
			<p>随后，对清洗后的数据进行分帧加窗等操作，最后进行到达时间差的计算。这一组数据计算的到达时间差为 11 个采样点，且符号正确。由于室内温度必然存在误差，前文中我们以公式 ( 2 6) 代入计算，以室内 20℃ 代入，则声速 vspeed ≈ 343.42 m / s = 34342 cm / s，因此根据计算方案求解出的到达距离差为:</p>
			<p>11/44100 ? 34342 ≈ 8.<a href='result-59256210.html' target='resultFrame'><span class='s'>566cm，与实际距离相比误差为 0.</span></a>366cm。</p>
			<p>最后通过 matlab 的计算，将多组数据进行整合计算，计算坐标为 X =</p>
			<p>198.3329cm, Y = 298.0380cm, Z = 115.3334cm, 与实际坐标 X0 = 200cm, Y0 = 300cm,</p>
			<p>Z0 = 117cm 相比，误差为?X′ = 1.6671cm, ?Y′ = 1.9620cm, ?Z′ = 1.6666cm。</p>
			<p>综合多次测量的结果，在离线计算模型下，90% 以上计算的“左右”关系正确，到达时间差由于其必然是整数个采样点，因此很难测出准确值，但是在上面的数据我们也看出，实际误差 0.366cm 并没有超过一个采样点对应的距离，而 70% 系统计算的到达时间点采样值误差也并不超过 1 个采样点，而最终计算的坐标误差，每个坐标轴的分量误差不超过 10%.</p>
			<p>在在线指引的模型下，以前面采集的数据为例，求解的到达距离差为 8.566cm，因此，根据第四章提出的降维指引的思路，那么此阶段的指引方向角</p>
			<p>为 arctan(82?4.41.12) = arctan(1.6755) = 1.0327rad = 59.1694d，而实际的方向在水平面投影的方向则为 arctan() = arctan(1.5625) = 1.0015rad = 57.3817d，角度误差为 1.7877d。</p>
			<p>由于在在线指引的模型下，手机发声的功率是个很大的影响，但是由于在室内环境下，依然可以在室内较小的尺度下获得足以区分的音频强度。在大部分实验测量中，该算法都可以获得较为准确的到达时间差，尤其在 3m 以内的尺度下，测量的值会更准确，测量的方向角度误差在 2° 以内。此外，在“左右”问题的指标上，计算结果 95% 以上都是正确的，因此对在线指引的及时纠正起到了很好的检测作用。</p>
			<p></p>
			<p>	毕业论文	陈勇虎</p>
			<p>	毕业论文	陈勇虎</p>
			<p></p>
			<p>33</p>
			<p>34</p>
			<p>1</p>
			<p>第五章 总结与展望</p>
			<p>5.1 工作总结</p>
			<p>本文给出了关于利用具备双麦系统的智能手机实现室内定位的方案，首先对定位原理，信号时延计算原理进行阐述，又对双麦系统和智能手机及其内置传感器进行了介绍，并进而提出了离线计算和在线指引两种模型，最后在 matlab 和 Android 系统上进行了实现。本文工作涵盖了对定位方案的阐述和系统实现，以便于实验探究和后续开发。</p>
			<p>5.2 前景展望</p>
			<p>基于智能手机的应用研究会越来越深，对内置传感器的研究越来越深入，软硬件的协同发展无疑为二维空间乃至三维空间的定位和追踪带来了无限可能。除此以外，对惯性导航系统的应用也是现阶段比较热门的研究，因此将惯性系统和双麦相结合也有着广阔的发展空间。</p>
			<p>本文是一个基础性的探究性工作，虽然在室内定位方面做出了一定的贡献，但他仍然有一些不足，例如在离线定位的部署精度问题，对噪声的处理局限于室内低噪环境，在线指引的指引过程会是“离散”的指引过程，因此在这些方面都有待提高。</p>
			<p>也相信未来对智能手机双麦系统和内置传感器的研究，能够让室内定位乃</p>
			<p>至室外定位更加精确和用户友好，在这方面的研究工作也会更上一层楼。</p>
			<p></p>
			<p>参考文献</p>
			<p>[1] HONGZI Z, YUXIAO Z, ZIFAN L, et al. HyperEar: Indoor Remote Object Finding with a Single Phone[J]. IEEE 39th International Conference on Distributed Computing SysTems(ICDCS), 2019.</p>
			<p>[2] Wikipedia contributors. Global Positioning System[EB/OL]. Wikipedia, The Free</p>
			<p>Encyclopedia, 2020 (2020/4/2) [2020/5/20]. https://en.wikipedia.org/wiki/Global_Positioning_System.</p>
			<p>[3] 谢地, 鲁照权, 丁浩峰, et al. 基于超声波测距的高精度室内定位系统 [J]. 传感器与微系统, 2019(10).</p>
			<p>[4] 乔鑫, 李晓梅, 肖岱云. 基于超声波测距的室内定位设计 [J]. 电子设计工程,</p>
			<p>2019, 27(22) : 102 – 105.</p>
			<p>[5] 徐昆毓. 基于超声技术的室内定位设计 [J]. 技术与市场, 2019, 026(009) :</p>
			<p>10 – 12.</p>
			<p>[6] 赵予玮. 基于 RFID 及超声波的室内定位算法 [J]. 物联网技术, 2019,</p>
			<p>009(006) : 12 – 13.</p>
			<p>[7] KE S, TING Z, WEI W, et al. VSkin: Sensing Touch Gestures on Surfaces of Mobile Devices Using Acoustic Signals[J]. ACM MobiCom, 2018.</p>
			<p>[8] AARABI P. The Fusion of Distributed Microphone Arrays for Sound Localization[J]. EURASIP Journal on Applied Signal Processing, 2003, 2003(4) : 338 – 447.</p>
			<p>[9] Google Inc. Android Developers Sensors Overview[EB/OL]. 2020 [2020/5/20]. https://developer.android.com/guide/topics/sensors/sensors_overview.html.</p>
			<p>[10] 李招华，汪毓铎，邵青. 基于 Chan 的 TDOA 三维定位算法 [J]. 现代电信科</p>
			<p>技, 2014, 44(11) : 36 – 40+4.</p>
			<p>[11] 周鑫. 基于双麦克风手机的声源定位研究 [D]. [S.l.] : 大连理工大学, 2019. 毕业论文	陈勇虎</p>
			<p></p>
			<p>[12] Wikipedia contributors. Normalized frequency[EB/OL]. Wikipedia, The Free Encyclopedia, 2020 (2017/7/16) [2020/5/20]. https://en.wikipedia.org/wiki/Normalized_frequency_(unit).</p>
			<p>[13] Wikipedia contributors. Moving average[EB/OL]. Wikipedia, The Free Encyclopedia, 2020 (2020/2/19) [2020/5/20]. https://en.wikipedia.org/wiki/Moving_average.</p>
			<p>[14] Wikipedia contributors. Window function[EB/OL]. Wikipedia, The Free Encyclopedia, 2020 (2020/4/18) [2020/5/20]. https://en.wikipedia.org/wiki/Window_function.</p>
			<p>[15] 肖述才，王作英. 端点检测中的一种新的对数能量特征 [J]. 电声技术, ,</p>
			<p>2004(6) : 37 – 41.</p>
			<p></p>
			<p>致 谢</p>
			<p>非常感谢在 Dislab 实验室度过的两年时光，让我在实验室里拓宽眼界的同时，也不断纠正了自己的学习方法和学习态度。我的毕业论文撰写和系统实现中，也或多或少的遇到许多困难，也走过很多弯路。我很感谢我的导师谢磊副教授，从我毕设选题阶段，到我研究工作的开展，再到最后的论文撰写中，谢老师都给予了我细心的指导和点拨，给我纠正了很多错误的方向，避免我走了很多弯路。在实验室的两年，谢磊老师也给我的研究工作不断指引方向，在此，我向谢磊老师致以最真挚的谢意。</p>
			<p>同样，我也要感谢在 Dislab 实验室的同一课题组的各位师兄师姐，鲁欣然师兄在我的成长道路上指引了很多，从细节方面给予我帮助，王楚豫师兄同样，给了我研究工作上的很多帮助，让我的研究工作变的富有创新，也是他们给我提出的宝贵建议，让我可以不断改进自己。</p>
			<p>感谢大学四年来四种相伴的同学和朋友，因为你们的存在，我的大学才会在忙碌中透露出精彩。感谢每一位悉心教导我的老师，感谢钱柱中教授的指引，让我能够有机会参与到香港游学中增长知识和阅历，让我在问题求解的课程中感受到计算机和算法的魅力。最后感谢科比先生，也是我一生的标杆。</p>
			<p>1</p>
			<p>1</p>
			<p>1</p>
    </div>
</body>
</html>